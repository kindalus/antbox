# Dockerfile
FROM denoland/deno:alpine-1.43.1

RUN echo "http://dl-cdn.alpinelinux.org/alpine/v3.17/community" >> /etc/apk/repositories

RUN apk update



ADD https://worldtimeapi.org/api/timezone/Etc/UTC /.timestamp

WORKDIR /app
COPY . .

RUN deno cache main.ts

ENV PORT=7180
EXPOSE 7180

RUN addgroup -S antx && adduser -S antx -G antx

USER antx

VOLUME [ "/data" ]

CMD ["./start_server.sh", "--demo"]
